# BOPs_calculation
This is a python implemenation based on [torchstat](https://github.com/Swall0w/torchstat) for BOPs（the number of binary operations） calculation.
The usage is same as [torchstat](https://github.com/Swall0w/torchstat)

The rule of BOPs calculation is similar to FLOPs：for a given feature map whose size is 1 * 3 * 224 * 224, it forward with a conv with 7 * 7 kernel size and generate a feature map whose size is 1 * 64 * 112 * 112. Thus the BOPs of this conv is 3 * 7 * 7 * 64 * 112 * 112 * 1

# Example 
```
                                       module name  input shape output shape      params memory(MB)           MAdd          Flops             Bops  MemRead(B)  MemWrite(B) duration[%]   MemR+W(B)
0                           conv1    3 224 224   64 112 112      9408.0       3.06  235,225,088.0  118,013,952.0              0.0    639744.0    3211264.0       2.29%   3851008.0
1                             bn1   64 112 112   64 112 112       128.0       3.06    3,211,264.0    1,605,632.0              0.0   3211776.0    3211264.0       0.97%   6423040.0
2                         maxpool   64 112 112   64  56  56         0.0       0.77    1,605,632.0      802,816.0              0.0   3211264.0     802816.0      11.76%   4014080.0
3                       avgpool_2    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
4      layer1.0.binary_activation   64  56  56   64  56  56         0.0       0.77            0.0            0.0        200,704.0         0.0          0.0       3.42%         0.0
5            layer1.0.binary_conv   64  56  56   64  56  56     36864.0       0.77            0.0            0.0    115,605,504.0         0.0          0.0       2.47%         0.0
6                    layer1.0.bn1   64  56  56   64  56  56       128.0       0.77      802,816.0      401,408.0              0.0    803328.0     802816.0       0.27%   1606144.0
7                layer1.0.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
8      layer1.1.binary_activation   64  56  56   64  56  56         0.0       0.77            0.0            0.0        200,704.0         0.0          0.0       3.23%         0.0
9            layer1.1.binary_conv   64  56  56   64  56  56     36864.0       0.77            0.0            0.0    115,605,504.0         0.0          0.0       1.21%         0.0
10                   layer1.1.bn1   64  56  56   64  56  56       128.0       0.77      802,816.0      401,408.0              0.0    803328.0     802816.0       0.28%   1606144.0
11               layer1.1.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
12     layer1.2.binary_activation   64  56  56   64  56  56         0.0       0.77            0.0            0.0        200,704.0         0.0          0.0       3.23%         0.0
13           layer1.2.binary_conv   64  56  56   64  56  56     36864.0       0.77            0.0            0.0    115,605,504.0         0.0          0.0       1.19%         0.0
14                   layer1.2.bn1   64  56  56   64  56  56       128.0       0.77      802,816.0      401,408.0              0.0    803328.0     802816.0       0.26%   1606144.0
15               layer1.2.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
16     layer1.3.binary_activation   64  56  56   64  56  56         0.0       0.77            0.0            0.0        200,704.0         0.0          0.0       3.18%         0.0
17           layer1.3.binary_conv   64  56  56   64  56  56     36864.0       0.77            0.0            0.0    115,605,504.0         0.0          0.0       1.20%         0.0
18                   layer1.3.bn1   64  56  56   64  56  56       128.0       0.77      802,816.0      401,408.0              0.0    803328.0     802816.0       0.28%   1606144.0
19               layer1.3.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
20     layer2.0.binary_activation   64  56  56   64  56  56         0.0       0.77            0.0            0.0        200,704.0         0.0          0.0       3.10%         0.0
21           layer2.0.binary_conv   64  56  56  128  56  56     73728.0       1.53            0.0            0.0    231,211,008.0         0.0          0.0       2.83%         0.0
22                   layer2.0.bn1  128  56  56  128  56  56       256.0       1.53    1,605,632.0      802,816.0              0.0   1606656.0    1605632.0       1.32%   3212288.0
23               layer2.0.avgpool  128  56  56  128  28  28         0.0       0.38      401,408.0      401,408.0              0.0   1605632.0     401408.0       0.29%   2007040.0
24     layer2.1.binary_activation  128  28  28  128  28  28         0.0       0.38            0.0            0.0        100,352.0         0.0          0.0       1.45%         0.0
25           layer2.1.binary_conv  128  28  28  128  28  28    147456.0       0.38            0.0            0.0    115,605,504.0         0.0          0.0       1.99%         0.0
26                   layer2.1.bn1  128  28  28  128  28  28       256.0       0.38      401,408.0      200,704.0              0.0    402432.0     401408.0       0.17%    803840.0
27               layer2.1.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
28     layer2.2.binary_activation  128  28  28  128  28  28         0.0       0.38            0.0            0.0        100,352.0         0.0          0.0       1.30%         0.0
29           layer2.2.binary_conv  128  28  28  128  28  28    147456.0       0.38            0.0            0.0    115,605,504.0         0.0          0.0       1.26%         0.0
30                   layer2.2.bn1  128  28  28  128  28  28       256.0       0.38      401,408.0      200,704.0              0.0    402432.0     401408.0       0.16%    803840.0
31               layer2.2.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
32     layer2.3.binary_activation  128  28  28  128  28  28         0.0       0.38            0.0            0.0        100,352.0         0.0          0.0       1.28%         0.0
33           layer2.3.binary_conv  128  28  28  128  28  28    147456.0       0.38            0.0            0.0    115,605,504.0         0.0          0.0       1.25%         0.0
34                   layer2.3.bn1  128  28  28  128  28  28       256.0       0.38      401,408.0      200,704.0              0.0    402432.0     401408.0       0.15%    803840.0
35               layer2.3.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
36     layer3.0.binary_activation  128  28  28  128  28  28         0.0       0.38            0.0            0.0        100,352.0         0.0          0.0       1.29%         0.0
37           layer3.0.binary_conv  128  28  28  256  28  28    294912.0       0.77            0.0            0.0    231,211,008.0         0.0          0.0       3.93%         0.0
38                   layer3.0.bn1  256  28  28  256  28  28       512.0       0.77      802,816.0      401,408.0              0.0    804864.0     802816.0       0.23%   1607680.0
39               layer3.0.avgpool  256  28  28  256  14  14         0.0       0.19      200,704.0      200,704.0              0.0    802816.0     200704.0       0.45%   1003520.0
40     layer3.1.binary_activation  256  14  14  256  14  14         0.0       0.19            0.0            0.0         50,176.0         0.0          0.0       1.37%         0.0
41           layer3.1.binary_conv  256  14  14  256  14  14    589824.0       0.19            0.0            0.0    115,605,504.0         0.0          0.0       3.75%         0.0
42                   layer3.1.bn1  256  14  14  256  14  14       512.0       0.19      200,704.0      100,352.0              0.0    202752.0     200704.0       0.14%    403456.0
43               layer3.1.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
44     layer3.2.binary_activation  256  14  14  256  14  14         0.0       0.19            0.0            0.0         50,176.0         0.0          0.0       1.39%         0.0
45           layer3.2.binary_conv  256  14  14  256  14  14    589824.0       0.19            0.0            0.0    115,605,504.0         0.0          0.0       2.65%         0.0
46                   layer3.2.bn1  256  14  14  256  14  14       512.0       0.19      200,704.0      100,352.0              0.0    202752.0     200704.0       0.16%    403456.0
47               layer3.2.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
48     layer3.3.binary_activation  256  14  14  256  14  14         0.0       0.19            0.0            0.0         50,176.0         0.0          0.0       1.26%         0.0
49           layer3.3.binary_conv  256  14  14  256  14  14    589824.0       0.19            0.0            0.0    115,605,504.0         0.0          0.0       2.06%         0.0
50                   layer3.3.bn1  256  14  14  256  14  14       512.0       0.19      200,704.0      100,352.0              0.0    202752.0     200704.0       0.14%    403456.0
51               layer3.3.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
52     layer4.0.binary_activation  256  14  14  256  14  14         0.0       0.19            0.0            0.0         50,176.0         0.0          0.0       1.26%         0.0
53           layer4.0.binary_conv  256  14  14  512  14  14   1179648.0       0.38            0.0            0.0    231,211,008.0         0.0          0.0       4.86%         0.0
54                   layer4.0.bn1  512  14  14  512  14  14      1024.0       0.38      401,408.0      200,704.0              0.0    405504.0     401408.0       0.21%    806912.0
55               layer4.0.avgpool  512  14  14  512   7   7         0.0       0.10      100,352.0      100,352.0              0.0    401408.0     100352.0       0.08%    501760.0
56     layer4.1.binary_activation  512   7   7  512   7   7         0.0       0.10            0.0            0.0         25,088.0         0.0          0.0       1.13%         0.0
57           layer4.1.binary_conv  512   7   7  512   7   7   2359296.0       0.10            0.0            0.0    115,605,504.0         0.0          0.0       7.33%         0.0
58                   layer4.1.bn1  512   7   7  512   7   7      1024.0       0.10      100,352.0       50,176.0              0.0    104448.0     100352.0       0.17%    204800.0
59               layer4.1.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
60     layer4.2.binary_activation  512   7   7  512   7   7         0.0       0.10            0.0            0.0         25,088.0         0.0          0.0       1.17%         0.0
61           layer4.2.binary_conv  512   7   7  512   7   7   2359296.0       0.10            0.0            0.0    115,605,504.0         0.0          0.0       5.98%         0.0
62                   layer4.2.bn1  512   7   7  512   7   7      1024.0       0.10      100,352.0       50,176.0              0.0    104448.0     100352.0       0.17%    204800.0
63               layer4.2.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
64     layer4.3.binary_activation  512   7   7  512   7   7         0.0       0.10            0.0            0.0         25,088.0         0.0          0.0       1.18%         0.0
65           layer4.3.binary_conv  512   7   7  512   7   7   2359296.0       0.10            0.0            0.0    115,605,504.0         0.0          0.0       4.80%         0.0
66                   layer4.3.bn1  512   7   7  512   7   7      1024.0       0.10      100,352.0       50,176.0              0.0    104448.0     100352.0       0.17%    204800.0
67               layer4.3.avgpool    0   0   0    0   0   0         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.00%         0.0
68                        avgpool  512   7   7  512   1   1         0.0       0.00            0.0            0.0              0.0         0.0          0.0       0.31%         0.0
69                             fc          512           10      5130.0       0.00       10,230.0        5,120.0              0.0     22568.0         40.0       0.56%     22608.0
total                                                        11007818.0      29.48  248,883,190.0  125,194,240.0  2,198,185,472.0     22568.0         40.0     100.00%  34110800.0
==================================================================================================================================================================================
Total params: 11,007,818
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total memory: 29.48MB
Total MAdd: 248.88MMAdd
Total Flops: 125.19MFlops
Total Bops: 2.2GBops
Total MemR+W: 32.53MB
```

